<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AntLiteCSS/custom css util Landing Page for E-learning</title>
    <link href="./css/index.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

</head>

<body class="bg-light text-md font-base text-primary">
    <header class="bg-white border-b shadow-sm p-3 fixed z-10">
        <!-- Top Row -->
        <div
            class="flex   justify-start md:justify-between  mx-auto  flex-col md:flex-row  md:items-center  gap-1 md:gap-3 ">

            <!-- Social Icons -->
            <div class=" gap-2 md:order-2 order-1 items-center mx-auto  hidden md:flex">
                <a href="#" class="border rounded-full p-2"><i class="fab fa-cart"></i></a>
                <a href="#" class="border rounded-full p-2"><i class="fab fa-twitter"></i></a>
                <a href="#" class="border rounded-full p-2"><i class="fab fa-instagram"></i></a>
                <a href="#" class="border rounded-full p-2"><i class="fab fa-dribbble"></i></a>
            </div>

            <!-- Logo -->
            <div class="text-center md:order-1 order-2 w-full sm:w-auto">
                <h1 class="text-lg font-bold">UNI<span class="text-warning">CAST</span></h1>
                <p class="text-muted text-sm">E-LEARNING COMPANY</p>
            </div>

            <!-- Search -->
            <div class="md:order-3 order-3 w-full w-auto mr-8">
                <form class="flex  rounded-full overflow-hidden w-full sm:w-auto">
                    <input class="input rounded-none border-0 bg-transparent px-3 w-full" placeholder="Search"
                        id="course-search" />
                    <button type="submit" class="bg-muted text-white px-4"><i class="fas fa-search"></i></button>
                </form>
            </div>
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="md:hidden mt-4">
            <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"
                class="text-muted text-md flex items-center gap-2">
                <i class="fas fa-bars"></i> Browse Categories
            </button>
        </div>

            <!-- Nav Menu -->
    <nav class="border-t border-b border-border bg-white py-2 hidden  md:block ">
      <ul class="flex justify-center gap-6 text-sm uppercase">
        <!-- Browse Categories Button -->
        <li><a href="#" class="text-primary text-muted font-semibold" onclick="toggleMegaMenu()"
            class="px-4 py-2 bg-gray-800 text-white rounded inline-flex items-center gap-2">
            ☰ Course Categories</a>
        </li>



        <li><a href="courses.html" class="text-primary text-muted font-semibold">Courses</a></li>
        <li><a href="dashboard.html" class="text-black hover:text-primary">Dashboard</a></li>
        <li><a href="my-courses.html" class="text-black hover:text-primary">My Courses</a></li>
        <li><a href="#" class="text-black hover:text-primary">Top Seller</a></li>
        <li><a href="#" class="text-black hover:text-primary">Books</a></li>
        <li><a href="#" class="text-black hover:text-primary">Author</a></li>
        <li><a href="#" class="text-black hover:text-primary">Blog</a></li>
        <li><a href="#" class="text-black hover:text-primary">Contact</a></li>
      </ul>
    </nav>

    <!-- Mega Menu -->
    <div id="megaMenu" class="fixed top-16 left-0 w-full z-50 hidden bg-white shadow-lg px-6 py-8">
      <h2 class="text-lg font-semibold mb-4">All Categories</h2>
      <div id="categoryGrid" class="grid grid-cols-2  md:grid-cols-4  gap-4 text-sm"></div>
    </div>



        <!-- Mobile Nav -->
        <nav class="sm:hidden hidden mt-4 bg-black text-white text-sm uppercase" id="mobile-menu">
            <!-- <div class="overlay absolute inset-0" style="background: rgba(255,255,255,0.5)"></div> -->
            <a href="#" class="block py-2 border-b px-3 text-primary">Home</a>
            <a href="#" class="block py-2 border-b px-3">About</a>
            <a href="#" class="block py-2 border-b px-3">Coming Soon</a>
            <a href="#" class="block py-2 border-b px-3">Top Seller</a>
            <a href="#" class="block py-2 border-b px-3">Books</a>
            <a href="#" class="block py-2 border-b px-3">Author</a>
            <a href="#" class="block py-2 border-b px-3">Blog</a>
            <a href="#" class="block py-2 border-b px-3">Contact</a>
        </nav>
    </header>







    <main id="home" class="bg-white">

        <!-- Hero Section example-->
        <section class="flex flex-col items-center justify-center text-center py-6 px-4 sm:py-12">
            <h2 class="text-lg sm:text-xl font-bold mb-3">Build Beautiful UIs with Ease</h2>
            <p class="text-muted mb-4 max-w-md">
                A lightweight, Ant Design–inspired utility-first CSS framework tailored for mobile-first design and
                rapid prototyping.
            </p>
            <button class="btn btn-primary">Start Building</button>
        </section>



        <!--lets get concerned about responsive mobile screen for the modules course title and sections-->
        <section class=" px-4 py-4 flex flex-col md:flex-row gap-8">

            <div class="block md:hidden mb-4">
                <i class="fas fa-bars" onclick="toggleDrawer(true)"></i> View Modules
            </div>
            <div id="modules-drawer" class="fixed inset-0 z-10 bg-black bg-opacity-40 hidden lg:hidden">
                <div class="absolute left-0 top-0 h-full w-11/12 max-w-sm bg-white p-4 overflow-y-auto shadow-xl">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold">Course Modules</h2>
                        <button onclick="toggleDrawer(false)" class="text-xl">&times;</button>
                    </div>
                    <div id="drawer-course-modules" class="space-y-6"></div>
                </div>
            </div>



            <!-- Right: Sidebar -->
            <aside class="w-full sticky top-24 self-start border-2 radius-2">
                <h1 class="text-2xl  text-black mb-4 pl-4">Advanced UI Design Course</h1>
                <p class="text-muted mb-6">Master the art of creating stunning user interfaces with real-world projects
                    and interactive walkthroughs.</p>
                <!-- <video id="video-player" controls class="rounded-xl w-full mb-4"
                    poster="https://via.placeholder.com/640x360">
                    <source id="video-src" src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video> -->
                <div id="video-wrapper" class="rounded-xl overflow-hidden w-full aspect-video mb-4">
                    <!-- dynamically  injected here -->
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2" id="price">₦15,000</h3>
                    <p class="text-sm text-muted mb-4" id="duration">15 modules • 3 hours</p>
                    <button class="text-xl w-full" id="enrollBtn">Enroll Now</button>
                </div>
            </aside>


            <!-- Left: Course Modules -->
            <div class="w-full md:w-38  p-2 hidden md:block">

                <!-- Modules -->
                <div id="course-modules" class="space-y-6 p-3">
                    <!-- Modules injected by JS -->
                </div>
            </div>

        </section>


    </main>




    <footer class="bg-gray-100 text-white pt-12 pb-8 border-t">
        <div class="container mx-auto px-4">

            <!-- Top grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 mb-12">

                <!-- Logo & About -->
                <div>
                    <h2 class="text-xl font-bold mb-4">UNICAST</h2>
                    <p class="text-sm text-muted mb-4 text-lg">
                        Discover, Engage and embrace your next favorite career growth. We connect talents to clients
                        that matter.
                    </p>
                    <div class="flex gap-4 mt-4 text-lg">
                        <a href="#" class="text-muted text-lg hover:text-white"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-muted hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-muted hover:text-white"><i class="fab fa-linkedin"></i></a>
                        <a href="#" class="text-muted hover:text-white"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <!-- Product Links -->
                <div>
                    <h3 class="text-md font-semibold mb-3 text-xl">Products</h3>
                    <ul class="text-sm space-y-2 text-lg">
                        <li><a href="#" class="text-muted hover:text-white">Books</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Authors</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Genres</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Pre-orders</a></li>
                    </ul>
                </div>

                <!-- Support Links -->
                <div>
                    <h3 class="text-md font-semibold mb-3 text-xl">Support</h3>
                    <ul class="text-sm space-y-2 text-lg">
                        <li><a href="#" class="text-muted hover:text-white">Contact</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Help Center</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Returns</a></li>
                        <li><a href="#" class="text-muted hover:text-white">Shipping</a></li>
                    </ul>
                </div>

                <!-- Newsletter -->
                <div>
                    <h3 class="text-md font-semibold mb-3 text-xl">Newsletter</h3>
                    <p class="text-sm text-muted mb-4 text-lg">Get the latest updates and offers.</p>
                    <form class="flex flex-col sm:flex-row gap-2">
                        <input type="email" placeholder="Your email" class="px-3 py-2 rounded-md w-full text-dark" />
                        <button class="btn btn-primary">Subscribe</button>
                    </form>
                </div>

            </div>


        </div>
    </footer>

    <!-- Footer -->
    <footer class="py-6 px-4 bg-light text-center text-muted text-sm border-t">
        © 2025 AntLiteCSS. All rights reserved.
    </footer>
    <script src="./js/auth.js"></script>
    <script>



        const currentCourse = localStorage.getItem("selected_course") ? JSON.parse(localStorage.getItem("selected_course")) : generateMockCourses(1000)[0]
        if (!currentCourse) {
            alert("cant find course")
        }
        const isEnrolled = localStorage.getItem("is_enrolled") === "true";

        function generateMockCourses(count) {
            const categories = ['Design', 'Development', 'Marketing', 'Business'];
            const styles = ['video', 'text', 'interactive'];
            const levels = ["Beginner", "Intermediate", "Advanced"];

            const list = [];
            for (let i = 1; i <= count; i++) {
                const id = `course-${i}`;
                const category = categories[i % categories.length];
                const level = levels[i % levels.length];
                const curriculum = generateCurriculum(i);

                list.push({
                    id: i,
                    title: `Course ${i}`,
                    description: `This is a description of Course ${i}.`,
                    category: categories[i % 4],
                    style: styles[i % 3],
                    level,
                    price: Math.floor(Math.random() * 500),
                    image: `https://img-c.udemycdn.com/course/480x270/382300_f75b_3.jpg?text=Course+${i}`,
                    instructor: `Instructor ${i}`,
                    introVideo: "https://vimeo.com/76979871", //"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4",
                    tags: [category, level],
                    curriculum,
                    approved: true,
                    approvalNote: "", // optional
                });
            }
            return list;
        }
        function generateCurriculum(seed = 1) {
            const sectionCount = 9 + (seed % 3); // 2–4 sections
            return Array.from({ length: sectionCount }, (_, s) => ({
                title: `Section ${s + 1}`,
                collapsed: true,
                children: Array.from({ length: 3 + (seed % 2) }, (_, c) => ({
                    title: `Lesson ${s + 1}.${c + 1}`,
                    unlocked: c === 0, // unlock only first lesson
                    video: "https://vimeo.com/76979871"  //|| "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"
                }))
            }));
        }


        const modules = currentCourse?.curriculum

        function markWatched(sectionIndex, childIndex) {
            const key = `watched_${sectionIndex}_${childIndex}`;
            localStorage.setItem(key, "true");
        }





        function buildModuleSection(section, sectionIndex) {
            const sectionId = `section-${sectionIndex}`;
            //                 //track percentage watched
            const total = section.children.length;
            const watchedCount = section.children.filter((_, i) =>
                localStorage.getItem(`watched_${sectionIndex}_${i}`) === "true"
            ).length;

            const percent = Math.floor((watchedCount / total) * 100);
            const childrenHTML = section.children.map((child, childIndex) => {
                const locked = !child.unlocked && !isEnrolled;
                const watched = localStorage.getItem(`watched_${sectionIndex}_${childIndex}`) === "true";
                const watchedBadge = watched ? '<span class="ml-auto text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded">Watched</span>' : '';
                const lockedBadge = locked ? '<span class="ml-auto text-xs px-2 py-0.5 bg-gray-200 rounded">Locked</span>' : '';



                return `
      <li class="flex w-full  gap-2 text-md ${locked ? 'text-muted cursor-not-allowed' : 'hover:text-primary cursor-pointer'}"
          onclick="playVideo(${sectionIndex}, ${childIndex})">
        <i class="fa ${locked ? 'fa-lock' : 'fa-play-circle'} text-md"></i>
        ${child.title}
        ${locked ? lockedBadge : watchedBadge}
      </li>
    `;
            }).join("");

            return `
    <div>
      <div class="flex  justify-between mb-2 text-left bg-gray-100 p-2 " onclick="toggleSection(${sectionIndex})">
        <h3 class="text-lg text-muted font-bold">${section.title}</h3>
        <i class="fa fa-chevron-${section.collapsed ? 'down' : 'up'} text-xs text-muted"></i>
      </div> 
      
     <div class="w-full h-1 bg-gray-200 rounded bg-gray-200">
        
           <div class="bg-green-500 h-1 rounded" style="width: ${percent}%;"></div>
         </div>
      <ul class="ml-4 space-y-2 transition-all duration-300 ${section.collapsed ? 'hidden' : ''}" id="${sectionId}">
         <span class="text-xs ${percent > 45 ? 'text-green' : 'text-red'}  mb-1 flex justify-end">Progress: ${percent}%</span>
        ${childrenHTML}
      </ul>
    </div>
  `;
        }



        function renderModules() {
            const container = document.getElementById("course-modules");
            const drawerContainer = document.getElementById("drawer-course-modules");

            if (container) container.innerHTML = "";
            if (drawerContainer) drawerContainer.innerHTML = "";

            modules.forEach((section, sectionIndex) => {
                const html = buildModuleSection(section, sectionIndex);
                if (container) container.innerHTML += html;
                if (drawerContainer) drawerContainer.innerHTML += html;
            });
        }


        function toggleSection(index) {
            modules[index].collapsed = !modules[index].collapsed;
            renderModules();
        }


        renderModules();


        const course = JSON.parse(localStorage.getItem("selected_course"));
        const enrollBtn = document.getElementById("enrollBtn");

        if (hasEnrolled(course.id)) {
            enrollBtn.textContent = "You are already enrolled";
            enrollBtn.disabled = true;
        } else {
            enrollBtn.addEventListener("click", () => {
                const result = enrollCourse(course.id);
                if (result.error) return alert(result.error);

                alert("Enrollment successful!");
                enrollBtn.textContent = "You are now enrolled";
                enrollBtn.disabled = true;
                renderCurriculum(course.curriculum, true); // reload as enrolled
            });
        }




        function playVideo(sectionIndex, childIndex) {
            const child = modules[sectionIndex].children[childIndex];
            const locked = !child.unlocked && !isEnrolled;

            if (locked) {
                alert("This video is locked. Please enroll to access it.");
                return;
            }

            const url = child.video;
            const wrapper = document.getElementById("video-wrapper");

            wrapper.innerHTML = renderVideoByType(url);

            localStorage.setItem("last_watched_video", JSON.stringify({ sectionIndex, childIndex }));
            markWatched(sectionIndex, childIndex);
        }

        function renderVideoByType(url) {
            if (!url) return "<p>No video available</p>";

            if (url.includes("youtube.com") || url.includes("youtu.be")) {
                const videoId = getYouTubeID(url);
                return `
      <iframe
        src="https://www.youtube.com/embed/${videoId}"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        class="w-full h-full"
      ></iframe>
    `;
            }

            if (url.includes("vimeo.com")) {
                const videoId = getVimeoID(url);
                return `
      <iframe
        src="https://player.vimeo.com/video/${videoId}"
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
        class="w-full h-full"
      ></iframe>
    `;
            }

            if (url.endsWith(".mp4")) {
                return `
      <video controls class="w-full h-full object-cover rounded-xl">
        <source src="${url}" type="video/mp4" />
        Your browser does not support video playback.
      </video>
    `;
            }

            return "<p>Unsupported video format.</p>";
        }


        function getYouTubeID(url) {
            try {
                const urlObj = new URL(url);
                if (urlObj.hostname === "youtu.be") {
                    return urlObj.pathname.slice(1);
                }
                return urlObj.searchParams.get("v");
            } catch {
                return "";
            }
        }

        function getVimeoID(url) {
            const match = url.match(/vimeo\.com\/(\d+)/);
            return match ? match[1] : "";
        }


        //auto play
        document.addEventListener("DOMContentLoaded", () => {
            const last = JSON.parse(localStorage.getItem("last_watched_video"));
            if (last) playVideo(last.sectionIndex, last.childIndex);
        });



        // collapsible state tracker
        function toggleSection(index) {
            modules[index].collapsed = !modules[index].collapsed;
            saveCollapseState();
            renderModules();
        }

        function saveCollapseState() {
            const state = modules.map(m => m.collapsed);
            localStorage.setItem("collapsed_sections", JSON.stringify(state));
        }


        document.addEventListener("DOMContentLoaded", () => {
            const saved = JSON.parse(localStorage.getItem("collapsed_sections"));
            if (Array.isArray(saved)) {
                modules.forEach((m, i) => m.collapsed = saved[i]);
            }

            const last = JSON.parse(localStorage.getItem("last_watched_video"));
            if (last) playVideo(last.sectionIndex, last.childIndex);

            renderModules();
        });



        // toggle smallscreen drawer
        function toggleDrawer(open) {
            const drawer = document.getElementById("modules-drawer");
            drawer.classList.toggle("hidden", !open);
        }



        

    const categories = Array.from({ length: 100 }, (_, i) => `Category ${i + 1}`);

    function toggleMegaMenu() {
      const menu = document.getElementById("megaMenu");
      const isOpen = !menu.classList.contains("hidden");
      menu.classList.toggle("hidden", isOpen);
      if (!isOpen) populateCategories();
    }

    function populateCategories() {
      const grid = document.getElementById("categoryGrid");
      if (grid.children.length > 0) return; // Only populate once

      const html = categories.map(cat => `
    <div class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded cursor-pointer whitespace-nowrap">${cat}</div>
  `).join("");

      grid.innerHTML = html;
    }

    </script>
</body>

</html>